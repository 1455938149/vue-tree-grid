webpackJsonp([1],{40:function(e,t,n){function i(e){n(84)}var c=n(29)(n(47),n(44),i,null,null);e.exports=c.exports},42:function(e,t){},43:function(e,t,n){function i(e){n(85)}var c=n(29)(n(48),n(45),i,null,null);e.exports=c.exports},44:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("你可以缩放浏览器试试")]),e._v(" "),n("tree-grid",{attrs:{items:e.data,columns:e.columns},on:{"on-row-click":e.rowClick,"on-selection-change":e.selectionClick,"on-sort-change":e.sortClick}})],1)},staticRenderFns:[]}},45:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"autoTbale",style:{width:e.tableWidth}},[n("table",{staticClass:"table table-bordered",attrs:{id:"hl-tree-table"}},[n("thead",[n("tr",e._l(e.cloneColumns,function(t,i){return n("th",["selection"===t.type?n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checks,expression:"checks"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checks)?e._i(e.checks,null)>-1:e.checks},on:{click:e.handleCheckAll,__c:function(t){var n=e.checks,i=t.target,c=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);c?s<0&&(e.checks=n.concat(null)):s>-1&&(e.checks=n.slice(0,s).concat(n.slice(s+1)))}else e.checks=c}}})]):n("label",[e._v("\n              "+e._s(e.renderHeader(t,i))+"\n              "),t.sortable?n("span",{staticClass:"ivu-table-sort"},[n("Icon",{class:{on:"asc"===t._sortType},attrs:{type:"arrow-up-b"},nativeOn:{click:function(t){e.handleSort(i,"asc")}}}),e._v(" "),n("Icon",{class:{on:"desc"===t._sortType},attrs:{type:"arrow-down-b"},nativeOn:{click:function(t){e.handleSort(i,"desc")}}})],1):e._e()])])}))]),e._v(" "),n("tbody",e._l(e.initItems,function(t,i){return n("tr",{class:{"child-tr":t.parent}},e._l(e.columns,function(c,s){return n("td",{directives:[{name:"show",rawName:"v-show",value:e.show(t),expression:"show(item)"}],style:e.tdWidth(c.width)},["selection"===c.type?n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checkGroup,expression:"checkGroup"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.checkGroup)?e._i(e.checkGroup,t.id)>-1:e.checkGroup},on:{__c:function(n){var i=e.checkGroup,c=n.target,s=!!c.checked;if(Array.isArray(i)){var o=t.id,r=e._i(i,o);s?r<0&&(e.checkGroup=i.concat(o)):r>-1&&(e.checkGroup=i.slice(0,r).concat(i.slice(r+1)))}else e.checkGroup=s}}})]):e._e(),e._v(" "),"action"===c.type?n("div",{staticClass:"btn_content"},e._l(c.actions,function(s){return n("i-button",{key:c.text,attrs:{type:s.type,size:"small"},on:{click:function(n){e.RowClick(t,n,i,s.text)}}},[e._v(e._s(s.text))])})):e._e(),e._v(" "),c.type?e._e():n("label",{on:{click:function(n){e.toggle(i,t)}}},[1==s?n("span",[n("i",{domProps:{innerHTML:e._s(t.spaceHtml)}}),e._v(" "),t.children&&t.children.length>0?n("i",{staticClass:"ivu-icon",class:{"ivu-icon-plus-circled":!t.expanded,"ivu-icon-minus-circled":t.expanded}}):n("i",{staticClass:"ms-tree-space"})]):e._e(),e._v(" "+e._s(e.renderBody(t,c))+"\n          ")])])}))}))])])},staticRenderFns:[]}},47:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(43),c=n.n(i);t.default={name:"app",data:function(){return{columns:[{type:"selection",width:"50"},{title:"编码",key:"code",sortable:!0,width:"150"},{title:"名称",key:"name",width:"150"},{title:"状态",key:"status",width:"150"},{title:"备注",key:"remark",width:"150"},{title:"操作",type:"action",actions:[{type:"primary",text:"编辑"},{type:"error",text:"删除"}],width:"150"}],data:[{id:"1",code:"0001",name:"测试数据1",status:"启用",remark:"测试数据测试数据",_checked:!0},{id:"2",code:"0002",name:"测试数据2",status:"启用",remark:"测试数据测试数据",children:[{id:"21",code:"00001",name:"测试数据01",status:"启用",remark:"测试数据测试数据"},{id:"22",code:"00002",name:"测试数据02",status:"启用",remark:"测试数据测试数据",children:[{id:"221",code:"000001",name:"测试数据001",status:"启用",remark:"测试数据测试数据"}]}]},{id:"3",code:"0003",name:"测试数据3",status:"启用",remark:"测试数据测试数据"},{id:"4",code:"0004",name:"测试数据4",status:"启用",remark:"测试数据测试数据"}]}},components:{treeGrid:c.a},methods:{rowClick:function(e,t,n){console.log("当前行数据:"+e),console.log("点击行号:"+t),console.log("点击事件:"+n)},selectionClick:function(e){console.log("选中数据id数组:"+e)},sortClick:function(e,t){console.log("排序字段:"+e),console.log("排序规则:"+t)}}}},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(50),c=n.n(i),s=n(53),o=n.n(s),r=n(15);t.default={name:"treeGrid",props:{columns:Array,items:{type:Array,default:function(){return[]}}},data:function(){return{initItems:[],cloneColumns:[],checkGroup:[],checks:!1,screenWidth:document.body.clientWidth,tdsWidth:0,timer:!1,dataLength:0}},computed:{tableWidth:function(){return this.tdsWidth>this.screenWidth&&this.screenWidth>0?this.screenWidth+"px":"100%"}},watch:{screenWidth:function(e){var t=this;this.timer||(this.screenWidth=e,this.timer=!0,setTimeout(function(){t.timer=!1},400))},items:function(){this.items&&(this.dataLength=this.Length(this.items),this.initData(this.deepCopy(this.items),1,null),this.checkGroup=this.renderCheck(this.items),this.checkGroup.length==this.dataLength?this.checks=!0:this.checks=!1)},columns:{handler:function(){this.cloneColumns=this.makeColumns()},deep:!0},checkGroup:function(e){this.checkAllGroupChange(e)}},mounted:function(){var e=this;this.items&&(this.dataLength=this.Length(this.items),this.initData(this.deepCopy(this.items),1,null),this.cloneColumns=this.makeColumns(),this.checkGroup=this.renderCheck(this.items),this.checkGroup.length==this.dataLength?this.checks=!0:this.checks=!1),this.$nextTick(function(){e.screenWidth=document.body.clientWidth}),window.onresize=function(){return function(){window.screenWidth=document.body.clientWidth,e.screenWidth=window.screenWidth}()}},methods:{tdWidth:function(e){if(e)return{"min-width":e+"px"}},handleSort:function(e,t){this.cloneColumns.forEach(function(e){return e._sortType="normal"}),this.cloneColumns[e]._sortType===t?this.cloneColumns[e]._sortType="normal":this.cloneColumns[e]._sortType=t,this.$emit("on-sort-change",this.cloneColumns[e].key,this.cloneColumns[e]._sortType)},RowClick:function(e,t,n,i){var c=this.makeData(e);this.$emit("on-row-click",c,t,n,i)},makeData:function(e){var t=void 0===e?"undefined":o()(e),n=void 0;if("array"===t)n=[];else{if("object"!==t)return e;n={}}if("array"===t)for(var i=0;i<e.length;i++)n.push(this.makeData(e[i]));else if("object"===t)for(var c in e)"spaceHtml"!=c&&"parent"!=c&&"level"!=c&&"expanded"!=c&&"isShow"!=c&&"load"!=c&&(n[c]=this.makeData(e[c]));return n},makeColumns:function(){var e=this,t=this.deepCopy(this.columns);return this.tdsWidth=0,t.forEach(function(t,n){t._index=n,t._width=t.width?t.width:"",t._sortType="normal",e.tdsWidth+=t.width?parseFloat(t.width):0}),t},initData:function(e,t,n){var i=this;this.initItems=[];for(var s="",o=1;o<t;o++)s+="<i class='ms-tree-space'></i>";e.forEach(function(e,o){e=c()({},e,{parent:n,level:t,spaceHtml:s}),void 0===e.expanded&&(e=c()({},e,{expanded:!1})),void 0===e.show&&(e=c()({},e,{isShow:!1})),e=c()({},e,{load:!!e.expanded}),i.initItems.push(e),e.children&&e.expanded&&i.initData(e.children,t+1,e)})},show:function(e){return 1==e.level||e.parent&&e.parent.expanded&&e.isShow},toggle:function(e,t){for(var n=this,i=t.level+1,c="",s=1;s<i;s++)c+="<i class='ms-tree-space'></i>";t.children&&(t.expanded?(t.expanded=!t.expanded,this.close(e,t)):(t.expanded=!t.expanded,t.load?this.open(e,t):(t.load=!0,t.children.forEach(function(s,o){n.initItems.splice(e+o+1,0,s),r.default.set(n.initItems[e+o+1],"parent",t),r.default.set(n.initItems[e+o+1],"level",i),r.default.set(n.initItems[e+o+1],"spaceHtml",c),r.default.set(n.initItems[e+o+1],"isShow",!0),r.default.set(n.initItems[e+o+1],"expanded",!1)}))))},open:function(e,t){var n=this;t.children&&t.children.forEach(function(t,i){t.isShow=!0,t.children&&t.expanded&&n.open(e+i+1,t)})},close:function(e,t){var n=this;t.children&&t.children.forEach(function(t,i){t.isShow=!1,t.children&&n.close(e+i+1,t)})},handleCheckAll:function(){this.checks?this.checkGroup=this.getArray(this.checkGroup.concat(this.All(this.items))):this.checkGroup=[]},getArray:function(e){for(var t={},n=e.length,i=[],c=0;c<n;c++)t[e[c]]||(t[e[c]]=!0,i.push(e[c]));return i},checkAllGroupChange:function(e){e.length===this.dataLength?this.checks=!0:this.checks=!1,this.$emit("on-selection-change",this.checkGroup)},All:function(e){var t=this,n=[];return e.forEach(function(e){n.push(e.id),e.children&&e.children.length>0&&(n=n.concat(t.All(e.children)))}),n},Length:function(e){var t=this,n=e.length;return e.forEach(function(e){e.children&&(n+=t.Length(e.children))}),n},renderHeader:function(e,t){return"renderHeader"in this.columns[t]?this.columns[t].renderHeader(e,t):e.title||"#"},renderBody:function(e,t,n){return e[t.key]},renderCheck:function(e){var t=this,n=[];return e.forEach(function(e){e._checked&&n.push(e.id),e.children&&e.children.length>0&&(n=n.concat(t.renderCheck(e.children)))}),n},deepCopy:function(e){var t,n,i,c=this.type(e);if("array"===c)t=[];else{if("object"!==c)return e;t={}}if("array"===c){for(n=0,i=e.length;n<i;n++)t.push(this.deepCopy(e[n]));return t}if("object"===c){for(n in e)t[n]=this.deepCopy(e[n]);return t}},type:function(e){var t=Object.prototype.toString;return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[t.call(e)]}},beforeDestroy:function(){window.onresize=null}}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),c=n(40),s=n.n(c),o=n(41),r=n.n(o),a=n(42);n.n(a);i.default.config.productionTip=!1,i.default.use(r.a),new i.default({el:"#app",template:"<App/>",components:{App:s.a}})},84:function(e,t){},85:function(e,t){}},[49]);
//# sourceMappingURL=app.8356f189b292f9bfc707.js.map